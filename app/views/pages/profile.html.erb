<div class="text-center">
  <h1>Profile Page</h1>
</div>

<div class="container">
  <div class="row">

    <div class="col-12 col-md-4">
      <p><%= image_tag "https://image.flaticon.com/icons/svg/2919/2919573.svg", class: "avatar" %></p>
      <p><%= current_user.nickname %></p>
      <p><%= current_user.description %></p>
    </div>

  </div>
</div>




<div class="container-fluid">
   <table style = "width:100%" class="border">
            <tr class="border">
              <th>Symbol</th>
              <th>Date</th>
              <th>Time</th>
              <th>Buy/Sell</th>
              <th>Size</th>
              <th>Entry Price</th>
              <th>Total Amount ($)</th>
              <th>Baseline</th>
              <th>Target Price</th>
              <th>Stop Loss</th>
              <th>Current Stock Price</th>
              <th>Gain/Loss %</th>
              <th>R1</th>
              <th>R2</th>
              <th>R3</th>
              <th>Remaining Shares</th>
              <th>Gain/Loss at close ($)</th>
              <th>Gain/Loss %</th>
            </tr>
            <% @positions.each do | position | %>
            <tr class="border">
              <th><%= Stock.pluck[position.stock_id - 1][1]%></th>
              <th><%=position.created_at.to_date %></th>
              <th><%=position.created_at.to_time.to_s.split[1] %></th>
              <th><%=position.buy_sell%></th>
              <th><%=position.size%></th>
              <th><%= position.entry%></th>
              <th><%= number_to_currency(position.total_amount) %></th>
              <th><%= position.baseline %></th>
              <th><%= position.target %></th>
              <th><%= position.stop_loss %></th>
              <th><%= position.current_price %></th>
              <th><%= position.gain_loss_percentage.truncate(4)*100 %></th>
              <th><%# position.price * 1.3 %></th>
              <th><%# position.price * 1.7 %></th>
              <th><%# position.price * 2 %></th>
              <th><%# position.quantity_1 - (position.quantity_1 - x) %></th>
              <th></th>
              <th></th>
            </tr>
            <% end %>


          </table>
</div>


<div class="container text-center">
  <!-- TradingView Widget BEGIN -->
  <div class="tradingview-widget-container">
    <div id="tradingview_ffdae"></div>
    <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/AMEX-SPY/" rel="noopener" target="_blank"><span class="blue-text">SPY Chart</span></a> by TradingView</div>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
    new TradingView.widget(
    {
    "width": 980,
    "height": 610,
    "symbol": "AMEX:SPY",
    "interval": "D",
    "timezone": "Etc/UTC",
    "theme": "dark",
    "style": "2",
    "locale": "en",
    "toolbar_bg": "#f1f3f6",
    "enable_publishing": false,
    "hide_side_toolbar": false,
    "allow_symbol_change": true,
    "container_id": "tradingview_ffdae"
  }
    );
    </script>
  </div>
  <!-- TradingView Widget END -->
</div>

<div class="container text-center">
    <!-- TradingView Widget BEGIN -->
  <div class="tradingview-widget-container">
    <div class="tradingview-widget-container__widget"></div>
    <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/screener/" rel="noopener" target="_blank"><span class="blue-text">Stock Screener</span></a> by TradingView</div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
    {
    "width": 1100,
    "height": 512,
    "defaultColumn": "overview",
    "defaultScreen": "most_capitalized",
    "market": "america",
    "showToolbar": true,
    "colorTheme": "dark",
    "locale": "en"
  }
    </script>
  </div>
  <!-- TradingView Widget END -->
</div>
